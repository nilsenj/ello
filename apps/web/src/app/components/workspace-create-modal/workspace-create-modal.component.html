<section *ngIf="modal.isOpen()" class="fixed inset-0 z-[1000] grid place-items-center bg-black/50 backdrop-blur-sm"
    (mousedown)="onBackdrop($event)" role="dialog" aria-modal="true">
    <div class="w-[min(92vw,500px)] bg-white rounded-xl shadow-2xl flex flex-col"
        (mousedown)="$event.stopPropagation()">
        <!-- Header -->
        <header class="flex items-center justify-between px-5 py-4 border-b border-gray-100">
            <h2 class="text-lg font-semibold text-gray-800">Create Workspace</h2>
            <button class="p-1 rounded-md hover:bg-gray-100 text-gray-500 transition-colors" (click)="close()">
                <lucide-icon [img]="XIcon" class="w-5 h-5"></lucide-icon>
            </button>
        </header>

        <!-- Body -->
        <div class="p-5 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Workspace Name</label>
                <input type="text" [ngModel]="name()" (ngModelChange)="name.set($event)"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="e.g. Engineering, Marketing, Personal" autofocus />
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Description <span
                        class="text-gray-400 font-normal">(Optional)</span></label>
                <textarea [ngModel]="description()" (ngModelChange)="description.set($event)" rows="3"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                    placeholder="What is this workspace for?"></textarea>
            </div>
        </div>

        <!-- Footer -->
        <footer class="px-5 py-4 bg-gray-50 rounded-b-xl flex justify-end gap-3">
            <button (click)="close()"
                class="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 rounded-md transition-colors">
                Cancel
            </button>
            <button (click)="create()" [disabled]="!name().trim() || creating()"
                class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2">
                <span *ngIf="creating()"
                    class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></span>
                {{ creating() ? 'Creating...' : 'Create Workspace' }}
            </button>
        </footer>
    </div>
</section>