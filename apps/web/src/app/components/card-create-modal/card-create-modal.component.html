<section *ngIf="modal.isOpen()" class="fixed inset-0 z-[1000] grid place-items-center bg-black/50 backdrop-blur-sm"
    (mousedown)="onBackdrop($event)" role="dialog" aria-modal="true">
    <div class="w-[min(92vw,600px)] max-w-[600px] bg-white rounded-xl shadow-2xl flex flex-col"
        (mousedown)="$event.stopPropagation()">
        <!-- header -->
        <header class="relative px-5 py-3 border-b border-slate-200 flex items-center justify-between">
            <div class="flex items-center gap-2 text-slate-800">
                <span class="font-semibold text-[15px]">Create card</span>
            </div>
            <button class="inline-flex h-8 w-8 items-center justify-center rounded-md hover:bg-slate-100"
                (click)="close()" aria-label="Close">
                <lucide-icon [img]="XIcon" class="h-4 w-4 text-slate-600"></lucide-icon>
            </button>
        </header>

        <!-- body -->
        <div class="p-5">
            <div class="grid gap-4">
                <label class="grid gap-1">
                    <span class="text-sm font-medium text-slate-700">Card title</span>
                    <input
                        class="h-9 w-full rounded-md border border-slate-300 bg-white px-3 text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400/50 focus:border-slate-400"
                        autofocus placeholder="e.g., Write launch plan" [ngModel]="title()"
                        (ngModelChange)="title.set($event)" />
                </label>

                <label class="grid gap-1">
                    <span class="text-sm font-medium text-slate-700 inline-flex items-center gap-1">
                        <lucide-icon [img]="ColumnsIcon" class="h-4 w-4 text-slate-500"></lucide-icon>
                        List
                    </span>
                    <select
                        class="h-9 w-full rounded-md border border-slate-300 bg-white px-3 text-sm text-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-400/50 focus:border-slate-400"
                        [ngModel]="listId()" (ngModelChange)="listId.set($event)">
                        <option [ngValue]="null" disabled>Select a list…</option>
                        <option *ngFor="let l of lists()" [value]="l.id">{{ l.name }}</option>
                    </select>
                </label>
            </div>
        </div>

        <!-- footer -->
        <footer class="border-t border-slate-200 bg-white px-4 py-3 flex justify-end gap-2 rounded-b-xl">
            <button
                class="inline-flex items-center rounded-md border border-slate-300 bg-white px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50"
                (click)="close()">
                Cancel
            </button>
            <button
                class="inline-flex items-center rounded-md bg-slate-800 px-3 py-1.5 text-sm text-white disabled:opacity-50 hover:bg-slate-900"
                [disabled]="!canSubmit() || adding()" (click)="create()">
                <span *ngIf="!adding()">Create card</span>
                <span *ngIf="adding()">Creating…</span>
            </button>
        </footer>
    </div>
</section>